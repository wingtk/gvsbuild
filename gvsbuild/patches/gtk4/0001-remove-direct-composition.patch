Subject: [PATCH] Patch out dcomp
---
Index: gdk/win32/gdkdisplay-win32.c
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/gdk/win32/gdkdisplay-win32.c b/gdk/win32/gdkdisplay-win32.c
--- a/gdk/win32/gdkdisplay-win32.c	(revision c6ed65e10cdcdc5240fcc80492a0dc1dea6a673a)
+++ b/gdk/win32/gdkdisplay-win32.c	(date 1763926875241)
@@ -517,7 +517,7 @@
   const GUID my_IID_IDCompositionDevice = { 0xC37EA93A,0xE7AA,0x450D,0xB1,0x6F,0x97,0x46,0xCB,0x04,0x07,0xF3 };
   IDXGIDevice *dxgi_device;
 
-  if (!gdk_has_feature (GDK_FEATURE_DCOMP))
+  if (!gdk_has_feature (GDK_FEATURE_DCOMP) || g_getenv ("GDK_WIN32_FORCE_DCOMP") == NULL)
     return;
   
   hr_warn (ID3D11Device_QueryInterface (self->d3d11_device, &IID_IDXGIDevice, (void **) &dxgi_device));
